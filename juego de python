import time

def jugar_juego():
    print("EstÃ¡s en una fiesta cuando de repente te raptan y apareces en un lugar extraÃ±o.")
    print("Caminas para escapar y todo se oscurece. Encuentras tres objetos: una llave, una linterna o una escopeta.")
    print("Â¿Con cuÃ¡l te quedas? (Escribe 'llave', 'linterna' o 'escopeta')")

    eleccion_inicial = input().lower()

    # --- CAMINO DE LA LLAVE ---
    if eleccion_inicial == "llave":
        print("\nCoges la llave y encuentras una cerradura en la oscuridad. Por un instante, el lugar se ilumina... Â¡y ves un espanto!")
        time.sleep(2)
        print("Â¿Quieres CORRER o ESCONDERTE detrÃ¡s de una silla?")
        eleccion_llave_1 = input().lower()

        if eleccion_llave_1 == "correr":
            print("\nCorres tan rÃ¡pido como puedes, y el espanto ya no estÃ¡. Â¡Encuentras una salida, felicidades!")
        elif eleccion_llave_1 == "esconderte":
            print("\nTe escondes detrÃ¡s de una silla vieja. El espanto te pasa de largo sin verte. Â¡Uf, quÃ© suerte!")
            time.sleep(2)
            print("Sigues adelante y llegas a una habitaciÃ³n con una caja fuerte y un teclado numÃ©rico.")
            print("Ves una nota que dice: 'El nÃºmero de veces que el espanto te ha pasado de largo'.")
            
            intento_caja = 0
            while intento_caja < 3:
                codigo = input("Ingresa el cÃ³digo de la caja fuerte: ")
                if codigo == "1":
                    print("\nÂ¡Correcto! La caja fuerte se abre. Contiene un diario viejo y un mapa.")
                    time.sleep(2)
                    print("El diario tiene una Ãºltima entrada: 'La Ãºnica salida real estÃ¡ detrÃ¡s de la puerta con la SERPIENTE tallada, no la del LEÃ“N'.")
                    eleccion_puertas = input("Encuentras dos puertas: una con una serpiente ğŸ y otra con un leÃ³n ğŸ¦. Â¿CuÃ¡l eliges? (Escribe 'serpiente' o 'leÃ³n') ").lower()
                    
                    if eleccion_puertas == "serpiente":
                        print("\nAbres la puerta de la serpiente y te encuentras en el exterior. Â¡Has escapado! Â¡Felicidades!")
                    elif eleccion_puertas == "leÃ³n":
                        print("\nAbres la puerta del leÃ³n. Un rugido resuena en la habitaciÃ³n y el espanto te encuentra. Fin del juego.")
                    else:
                        print("\nDecisiÃ³n no vÃ¡lida. El espanto te encuentra. Fin del juego.")
                    break
                else:
                    intento_caja += 1
                    if intento_caja < 3:
                        print("CÃ³digo incorrecto. Te quedan", 3 - intento_caja, "intentos.")
                    else:
                        print("CÃ³digo incorrecto. La caja fuerte se bloquea. El espanto regresa y te encuentra. Fin del juego.")
        else:
            print("\nDecisiÃ³n no vÃ¡lida. El espanto te encuentra. Fin del juego.")

    # --- CAMINO DE LA LINTERNA ---
    elif eleccion_inicial == "linterna":
        print("\nEnciendes la linterna y ves un camino iluminado. De pronto, oyes que algo se cayÃ³.")
        time.sleep(2)
        print("Â¿Quieres SEGUIR el camino o BUSCAR quÃ© fue lo que hizo ruido?")
        eleccion_linterna_1 = input().lower()

        if eleccion_linterna_1 == "seguir":
            print("\nSigues el camino iluminado. Aunque oyes ruido, confÃ­as en tu linterna.")
            print("\nEncuentras una puerta con tres sÃ­mbolos: â˜€ï¸, ğŸŒ™ y â­ï¸. Debes elegir uno.")
            time.sleep(2)
            eleccion_simbolo = input("Â¿CuÃ¡l eliges? (Escribe 'sol', 'luna' o 'estrella') ").lower()

            if eleccion_simbolo == "sol":
                print("\nEl sÃ­mbolo del sol se ilumina. Te teletransporta a un jardÃ­n soleado. Â¡Has escapado!")
            elif eleccion_simbolo == "luna":
                print("\nEl sÃ­mbolo de la luna te lleva a una habitaciÃ³n oscura. El espanto te encuentra. Fin del juego.")
            elif eleccion_simbolo == "estrella":
                print("\nEl sÃ­mbolo de la estrella brilla intensamente. Encuentras un pasaje secreto y logras salir. Â¡Felicidades!")
            else:
                print("\nElecciÃ³n no vÃ¡lida. La puerta se cierra para siempre. Fin del juego.")

        elif eleccion_linterna_1 == "buscar":
            print("\nDecides buscar el origen del ruido y encuentras un viejo baÃºl. EstÃ¡ cerrado con un candado con letras.")
            print("Hay una pista escrita en la pared: 'Es el sonido del viento que te guÃ­a'.")
            respuesta_baul = input("Â¿QuÃ© palabra forma la pista? ").lower()

            if respuesta_baul == "nose":
                print("\nÂ¡El candado se abre! Dentro hay un mapa detallado del lugar y una navaja. Con el mapa, encuentras la salida.")
                print("Llegas a una gran sala. Al final, hay una escalera y un conducto de ventilaciÃ³n.")
                eleccion_escape = input("Â¿Quieres ir por la ESCALERA o por el CONDUCTO? ").lower()
                
                if eleccion_escape == "escalera":
                    print("\nSubes la escalera. Oyes una voz que te llama desde un pasillo. Te dice que la puerta de arriba estÃ¡ cerrada.")
                    eleccion_voz = input("Â¿Quieres SEGUIR la voz o IGNORARLA y seguir subiendo? ").lower()
                    if eleccion_voz == "seguir":
                        print("\nSigues la voz y encuentras a una persona atraqpada. Te da una llave maestra. Â¡Sales de allÃ­! Â¡Felicidades!")
                    elif eleccion_voz == "ignorarla":
                        print("\nIgnoras la voz y sigues subiendo. La puerta de arriba estÃ¡ cerrada. El espanto aparece detrÃ¡s de ti. Fin del juego.")
                    else:
                        print("\nDecisiÃ³n no vÃ¡lida. El espanto te encuentra. Fin del juego.")
                elif eleccion_escape == "conducto":
                    print("\nEntras al conducto de ventilaciÃ³n. Es un laberinto sin fin. Te pierdes y te quedas sin aire. Fin del juego.")
                else:
                    print("\nDecisiÃ³n no vÃ¡lida. Te quedas inmÃ³vil y el espanto te encuentra. Fin del juego.")
            else:
                print("\nRespuesta incorrecta. El espanto se acerca, atraÃ­do por el ruido. Fin del juego.")
        else:
            print("\nDecisiÃ³n no vÃ¡lida. El espanto te encuentra. Fin del juego.")

    # --- CAMINO DE LA ESCOPETA ---
    elif eleccion_inicial == "escopeta":
        print("\nCoges la escopeta. Encuentras un espanto, y hay una mesa detrÃ¡s de ti.")
        time.sleep(2)
        print("Â¿Quieres BUSCAR detrÃ¡s de la mesa o DISPARAR?")
        eleccion_escopeta_1 = input().lower()

        if eleccion_escopeta_1 == "buscar":
            print("\nBuscas detrÃ¡s de la mesa, encuentras balas y matas al espanto. Â¡Encuentras una llave encima del espanto!")
            print("\nAhora con la llave, llegas a un pasillo largo. Al final, ves una puerta y al lado hay un pergamino con un acertijo.")
            time.sleep(2)
            print("El acertijo dice: 'Tengo ciudades, pero no casas. Tengo montaÃ±as, pero no Ã¡rboles. Tengo agua, pero no peces. Â¿QuÃ© soy?'")
            acertijo = input("\nEscribe tu respuesta: ").lower()

            if acertijo == "mapa":
                print("\nÂ¡Correcto! La puerta se abre. Te encuentras en un bosque, pero te das cuenta de que no sabes por dÃ³nde ir.")
                print("Encuentras dos caminos: uno con huellas de animales y otro con huellas de zapatos. ")
                eleccion_bosque = input("Â¿QuÃ© camino tomas? (Escribe 'animales' o 'zapatos') ").lower()
                
                if eleccion_bosque == "animales":
                    print("\nSigues las huellas de los animales. Te llevan a un arroyo y luego a una cueva. Un oso te ve y te persigue. Fin del juego.")
                elif eleccion_bosque == "zapatos":
                    print("\nSigues las huellas de los zapatos. Te llevan a una cabaÃ±a abandonada. Dentro, encuentras a una persona herida.")
                    time.sleep(2)
                    print("La persona te dice que hay una salida secreta en el sÃ³tano, pero no puede ayudarte a encontrarla.")
                    eleccion_ayuda = input("Â¿Quieres AYUDAR a la persona o DEJARLA y buscar el sÃ³tano solo? ").lower()
                    if eleccion_ayuda == "ayudar":
                        print("\nAyudas a la persona a curar sus heridas. Agradecida, te da la llave del sÃ³tano. Â¡Encuentras la salida y escapan juntos! Â¡Felicidades!")
                    elif eleccion_ayuda == "dejarla":
                        print("\nLa dejas sola y buscas el sÃ³tano. Encuentras la puerta, pero estÃ¡ cerrada. El espanto te encuentra. Fin del juego.")
                    else:
                        print("\nDecisiÃ³n no vÃ¡lida. El espanto te encuentra. Fin del juego.")
                else:
                    print("\nDecisiÃ³n no vÃ¡lida. Te pierdes en el bosque. Fin del juego.")
            else:
                print("\nRespuesta incorrecta. De repente, una trampa de gas se activa y te desmayas. Fin del juego.")

        elif eleccion_escopeta_1 == "disparar":
            print("\nNo tienes balas. El espanto te encuentra. Fin del juego.")
        else:
            print("\nDecisiÃ³n no vÃ¡lida. El espanto te encuentra. Fin del juego.")

    else:
        print("\nElecciÃ³n no vÃ¡lida. Te quedas inmÃ³vil y un espanto te encuentra. Fin del juego.")

    print("\n--- Fin del juego ---")

# Para jugar, llama a la funcion:;
jugar_juego()
